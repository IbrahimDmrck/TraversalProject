
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2 class="my-3">Şehir - Ülke İşlemleri</h2>
<div class="mb-3">
    <button type="button" id="btngetlist" class="btn btn-outline-info">Şehir Listesi</button>
    <button type="button" id="btngetbyid" class="btn btn-outline-primary">Şehir Getir</button>
    <button type="button" id="btnaddcity" class="btn btn-outline-success">Şehir Ekle</button>
    <button type="button" id="btndeletecity" class="btn btn-outline-danger">Şehir Sil</button>
    <button type="button" id="btnupdatecity" class="btn btn-outline-warning">Şehir Güncelle</button>
</div>

<div ><table class='table table-striped table-hover'>
    <thead>
        <tr><th>şehir ID </th><th>şehir adı</th><th>üLKE ADI</th></tr>
    </thead>
    <tbody id="citylist">
       
    </tbody>
</table></div>

@section scripts{
    <script>
        $('#btngetlist').click(function () {
            $.ajax({
                contentType: "application/json",
                dataType: "json",
                type: "GET",
                url: "/Admin/City/CityList",
                success: function (func) {
                    var cityTableList = $('#citylist');
                    cityTableList.empty();
                    let w = jQuery.parseJSON(func);
                    console.log(w);
                   // let tablehtml = "<table class = 'table table-striped table-hover'><tr><th>şehir ID </th><th>şehir adı</th><th>üLKE ADI</th></tr>";
                    $.each(w, (index, value) => {
                        //table += `<tr><td>${value.CityID}</td> <td>${value.CityName}</td><td>${value.CityCountr}</td></tr>`
                        var citytable = `<tr><td>${value.CityID}</td> <td>${value.CityName}</td><td>${value.CityCountry}</td></tr>`

                        cityTableList.append(citytable);
                    });
                   
                   
                },
                error: function (xhr) {
                    console.log(xhr.responseText);
                }
            });
        })
    </script>

}

